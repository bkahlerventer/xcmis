<?xml version="1.0" encoding="ISO-8859-1"?>
<configuration xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.exoplaform.org/xml/ns/kernel_1_0.xsd http://www.exoplaform.org/xml/ns/kernel_1_0.xsd" xmlns="http://www.exoplaform.org/xml/ns/kernel_1_0.xsd">

   <component>
      <type>org.xcmis.sp.jcr.exo.RepositoriesManagerImpl</type>
      <init-params>
         <object-param>
            <name>configs</name>
            <object type="org.xcmis.sp.jcr.exo.RepositoriesManagerImpl$ServiceConfig">
               <field name="configs">
                  <collection type="java.util.ArrayList">
                     <value>
                        <object type="org.xcmis.sp.jcr.exo.CMISRepositoryConfiguration">
                           <field name="id">
                              <!-- ID of CMIS repository -->
                              <string>cmis1</string>
                           </field>
                           <field name="repository">
                              <string>repository</string>
                           </field>
                           <field name="workspace">
                              <string>cmis</string>
                           </field>
                           <field name="indexConfiguration">
                              <object type="org.xcmis.sp.jcr.exo.IndexConfiguration">
                                 <field name="indexPath">
                                    <string>../temp/cmis-index/repository/cmis</string>
                                 </field>
                              </object>
                           </field>
                           <field name="properties">
                              <map type="java.util.HashMap">
                                 <entry>
                                    <key>
                                       <string>exo.cmis.changetoken.feature</string>
                                    </key>
                                    <value>
                                       <!-- Enable/Disable change token feature. -->
                                       <boolean>false</boolean>
                                    </value>
                                 </entry>
                              </map>
                           </field>
                        </object>
                     </value>
                  </collection>
               </field>
            </object>
         </object-param>
      </init-params>
   </component>

   <external-component-plugins>
      <target-component>org.exoplatform.services.jcr.RepositoryService</target-component>
      <component-plugin>
         <name>add.namespaces</name>
         <set-method>addPlugin</set-method>
         <type>org.exoplatform.services.jcr.impl.AddNamespacesPlugin</type>
         <init-params>
            <properties-param>
               <name>namespaces</name>
               <property name="cmis" value="http://www.exoplatform.com/jcr/cmis/1.0" />
            </properties-param>
         </init-params>
      </component-plugin>
      <component-plugin>
         <name>add.nodeType</name>
         <set-method>addPlugin</set-method>
         <type>org.exoplatform.services.jcr.impl.AddNodeTypePlugin</type>
         <init-params>
            <values-param>
               <name>autoCreatedInNewRepository</name>
               <description>Node types configuration file</description>
               <value>jar:/conf/cmis-nodetypes-config.xml</value>
            </values-param>
         </init-params>
      </component-plugin>
      <component-plugin>
         <name>register.listener</name>
         <set-method>addPlugin</set-method>
         <type>org.exoplatform.services.jcr.impl.RepositoryChangesListenerRegisterPlugin</type>
         <init-params>
            <value-param>
               <name>repository-name</name>
               <value>repository</value>
            </value-param>
            <value-param>
               <name>workspaces</name>
               <value>cmis</value>
            </value-param>
            <value-param>
               <name>component-class-name</name>
               <value>org.xcmis.sp.jcr.exo.query.index.StartableJcrIndexingService</value>
            </value-param>
         </init-params>
      </component-plugin>
   </external-component-plugins>

</configuration>
